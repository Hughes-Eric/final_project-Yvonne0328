<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Yvonne Huang" />


<title>What does the disaster say</title>

<script src="site_libs/header-attrs-2.18/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Spatial Data Science Final Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">What does the disaster say</h1>
<h3 class="subtitle">Emotional changes – stampede in Itaewon</h3>
<h4 class="author">Yvonne Huang</h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Disasters, such as storms, wildfires, and crowd stampede, occur and
threaten human’s physical and mental health. It is important to estimate
social resilience because it represents population mental health.
Therefore, understanding how people react and how their emotion changes
toward disasters would be a crucial factor when analyzing social
resilience. Twitter API allow users to access tweets within a week.
Therefore, in this project, we collected tweets from different time
frames, including before, during, and after disaster happened. To
evaluate social resilience, Twitter data is used to produce social
resilience index and analyze population emotion changes in a lexicon
based sentiment analysis, which means that the categorizing is based on
sentiment dictionaries. The trend of sentiment emotion score changes is
the symbol of social resilience. This project focused on analyzing
people’s emotional changes toward a crowd stampede incident in Itaewon,
Seoul, South Korea on October 29, 2022.</p>
</div>
<div id="materials-and-methods" class="section level1">
<h1>Materials and methods</h1>
<div id="data" class="section level2">
<h2>Data</h2>
<ul>
<li>Twitter API: TWitter allows every Twitter user to access tweets from
the world within 1 week. Because accessing data requires user token and
secret, this data is stored as .csv file to protect user’s privacy. we
collect data from Oct. 24 to Nov. 10. nearby Korea and Japan.</li>
<li>City coordinates: maps database provide the coordinate of each city,
it also includes the information of name and populations.</li>
<li>Sentiment dictionaries: tidytext library provide the dictionaries
with emotion information. <em>afinn</em>, and <em>nrc</em> are used in
this project.</li>
</ul>
<p>Here are the libraries used in this project.</p>
<pre class="r"><code>library(twitteR) 
library(rtweet)
library(dplyr)
library(tidytext)
library(textdata)
library(janeaustenr)
library(dplyr)
library(stringr)
library(tidyr)
library(ggplot2)
library(reshape2)
library(spData)
library(sf)
library(tidyverse)
library(maps)
library(wordcloud)
library(RColorBrewer)
library(wordcloud2)
library(tm)
knitr::opts_chunk$set(cache=TRUE)</code></pre>
</div>
<div id="download-and-clean-all-required-data" class="section level2">
<h2>Download and clean all required data</h2>
<p>Twitter data is already saved in “data” file, however, here is the
example code demonstrate data downloading. To analyze sentiment changes,
we collected tweets from three timeframes: before, during, and after
disaster happened. We used the keyword “korea” to collect the tweets
mention Korea. Also, since <em>get_sentiment()</em> cannot be used in
non-interactively platform, therefore, sentiment dictionaries were
downloaded and saved as .csv file.</p>
<pre class="r"><code>consumer_key &lt;- &quot;XXX&quot;
consumer_secret &lt;-&quot;XXX&quot;
access_token &lt;- &quot;XXX&quot;
access_secret &lt;- &quot;XXX&quot; 
setup_twitter_oauth(consumer_key, consumer_secret, access_token, access_secret)

# data accessing
loc = &quot;35.7745, 123.3780, 200mi&quot;

L0 &lt;- searchTwitter(&quot;korea&quot;, n = 1000, lang = &quot;en&quot;, geocode = loc,
                    since = &quot;2022-10-24&quot;, until = &quot;2022-10-29&quot;)
L1 &lt;- searchTwitter(&quot;korea&quot;, n = 1000, lang = &quot;en&quot;, geocode = loc,
                    since = &quot;2022-10-29&quot;, until = &quot;2022-10-31&quot;)
L2 &lt;- searchTwitter(&quot;korea&quot;, n = 1000, lang = &quot;en&quot;, geocode = loc,
                    since = &quot;2022-11-01&quot;, until = &quot;2022-11-03&quot;)
L3 &lt;- searchTwitter(&quot;korea&quot;, n = 1000, lang = &quot;en&quot;,
                    since = &quot;2022-11-03&quot;, until = &quot;2022-11-06&quot;)
L4 &lt;- searchTwitter(&quot;korea&quot;, n = 1000, lang = &quot;en&quot;,
                    since = &quot;2022-11-06&quot;, until = &quot;2022-11-09&quot;)
L5 &lt;- searchTwitter(&quot;korea&quot;, n = 1000, lang = &quot;en&quot;,
                    since = &quot;2022-11-09&quot;, until = &quot;2022-11-12&quot;)
L6 &lt;- searchTwitter(&quot;korea&quot;, n = 1000, lang = &quot;en&quot;,
                    since = &quot;2022-11-12&quot;, until = &quot;2022-11-15&quot;)
...


D0 &lt;- twListToDF(L0)%&gt;%
  mutate(timeline = &quot;before&quot;)
D1 &lt;- twListToDF(L1) %&gt;%
  mutate(timeline = &quot;during&quot;)
D2 &lt;- twListToDF(L2) %&gt;%
  mutate(timeline = &quot;after&quot;)
D3 &lt;- twListToDF(L3) %&gt;%
  mutate(timeline = &quot;after2&quot;)
D4 &lt;- twListToDF(L4) %&gt;%
  mutate(timeline = &quot;after3&quot;)
D5 &lt;- twListToDF(L5) %&gt;%
  mutate(timeline = &quot;after4&quot;)
D6 &lt;- twListToDF(L6) %&gt;%
  mutate(timeline = &quot;after5&quot;)
...


data &lt;- rbind(D0, D1, D2)
save_as_csv(data, &quot;XXX.csv&quot;)

afinn = get_sentiments(&quot;afinn&quot;)
nrc = get_sentiments(&quot;nrc&quot;)
save_as_csv(afinn, &quot;data/affin.csv&quot;)
save_as_csv(nrc, &quot;data/nrc.csv&quot;)</code></pre>
<p>A csv file (Twitter data) and Seoul location is read. Tweets locate
nearby Seoul within 120 km are remained. Also, emojis and links are
removed from the text.</p>
<pre class="r"><code>data &lt;- read.csv(&quot;data/Twitter_disaster_1025_1115.csv&quot;)
point &lt;- st_as_sf(data, coords = c(&quot;longitude&quot;, &quot;latitude&quot;), crs = 4326)
data(world.cities)
seoul &lt;- world.cities %&gt;%
  filter(name == &#39;Seoul&#39;)%&gt;%
  st_as_sf(coords = c(&quot;long&quot;, &quot;lat&quot;), crs = 4326)
seoul_buffer &lt;- seoul %&gt;%
  st_buffer(dist = 120000)

data &lt;- st_intersection(point, seoul_buffer)

data$text = gsub(&quot; ?(f|ht)tp(s?)://(.*)[.][a-z]+&quot;, &quot;&quot;, data$text)
data$text = gsub(&quot;[^\x01-\x7F]&quot;, &quot;&quot;, data$text)</code></pre>
<p>Finally, we introduced sentiment dictionaries.</p>
<pre class="r"><code>afinn = read.csv(&quot;data/afinn.csv&quot;)
nrc = read.csv(&quot;data/nrc.csv&quot;)</code></pre>
<p>The data we use in this project was collected within this area.</p>
<pre class="r"><code>data(world)
asia &lt;- world %&gt;%
  filter(subregion == &quot;Eastern Asia&quot;) %&gt;%
  st_transform(crs = 4326)

ggplot()+
  geom_sf(data = asia, fill = &quot;grey60&quot;)+
  geom_sf(data = seoul_buffer, fill = &#39;blue&#39;)+
  geom_sf(data = seoul, fill = &quot;red&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="data-processing" class="section level2">
<h2>Data processing</h2>
<p>To understand topic, keywords, and sentiment changes in tweets,
tweets are sliced into words, and the frequency of each word using is
calculated. Numbers, special characters, and spaces are removed from the
analysis. Also, because all the tweets mention “korea”, we removed the
word “korea” from analysis.</p>
<pre class="r"><code>steps &lt;- c(&quot;before&quot;, &quot;during&quot;, &quot;after&quot;, &quot;after2&quot;, &quot;after3&quot;, &quot;after4&quot;, &quot;after5&quot;)

for (i in steps){
  data_temp &lt;- data %&gt;%
    filter(timeline == i)
  text_data &lt;- data_temp$text
  docs_data &lt;- Corpus(VectorSource(text_data))
  docs_data&lt;- docs_data %&gt;%
    tm_map(removeNumbers) %&gt;%
    tm_map(removePunctuation) %&gt;%
    tm_map(stripWhitespace)
  docs_data &lt;- tm_map(docs_data, content_transformer(tolower))
  docs_data &lt;- tm_map(docs_data, removeWords, stopwords(&quot;english&quot;))
  dtm &lt;- TermDocumentMatrix(docs_data) 
  matrix &lt;- as.matrix(dtm) 
  words &lt;- sort(rowSums(matrix),decreasing=TRUE) 
  df_data &lt;- data.frame(word = names(words),freq=words)
  assign(paste0(&quot;df&quot;, i), df_data)
}</code></pre>
</div>
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<div id="word-clouds" class="section level2">
<h2>word clouds</h2>
<p>Word clouds can help us understand the topic trend in each time
frame. Also, they can ensure our results reflect the emotion changes are
related to the stampede incident on Oct. 29th. Before stampede, keywords
mostly used are more positive and more related to the KPOP trend.</p>
<pre class="r"><code>dfbefore &lt;- dfbefore %&gt;%
  filter(word != &quot;korea&quot;)
wordcloud(words = dfbefore$word,
          freq = dfbefore$freq, min.freq = 1,
          max.words=200, random.order=FALSE, rot.per=0.35,
          colors=brewer.pal(8, &quot;Dark2&quot;))</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-7-1.png" alt="Word cloud before stampede" width="576" />
<p class="caption">
Word cloud before stampede
</p>
</div>
<p>During Oct. 29th and Nov. 1st, it is obvious that people mentioned
“south” more often, which might represent <strong>south korea</strong>.
This figure indicates that people mentioned <strong>itaewon</strong>,
<strong>tragedy</strong>, and other words related to the stampede
incident.</p>
<pre class="r"><code>dfduring &lt;- dfduring %&gt;%
  filter(word != &quot;korea&quot;)
wordcloud(words = dfduring$word,
          freq = dfduring$freq, min.freq = 1,
          max.words=200, random.order=FALSE, rot.per=0.35,
          colors=brewer.pal(8, &quot;Dark2&quot;))</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-8-1.png" alt="Word cloud during stampede" width="576" />
<p class="caption">
Word cloud during stampede
</p>
</div>
<p>After disaster, people mentioned <strong>north</strong>,
<strong>missile</strong>, and <strong>ballistic</strong> more often,
which means people started to change their focus on the stampede
incident.</p>
<pre class="r"><code>dfafter &lt;- dfafter %&gt;%
  filter(word != &quot;korea&quot;)
wordcloud(words = dfafter$word,
          freq = dfafter$freq, min.freq = 1,
          max.words=200, random.order=FALSE, rot.per=0.35,
          colors=brewer.pal(8, &quot;Dark2&quot;))</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-9-1.png" alt="Word cloud after stampede" width="576" />
<p class="caption">
Word cloud after stampede
</p>
</div>
</div>
<div id="emotion-analysis" class="section level2">
<h2>emotion analysis</h2>
<p>Before the disaster, the words people used shows more characters with
positive emotions, such as <em>joy</em>.</p>
<pre class="r"><code>dfbefore %&gt;%
  inner_join(nrc) %&gt;%
  group_by(sentiment) %&gt;%
  arrange(desc(freq)) %&gt;%
  slice(1:10) %&gt;%
  ungroup() %&gt;%
  mutate(word = reorder(word, freq)) %&gt;%
  ggplot(aes(freq, word, fill = sentiment)) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~sentiment, scales = &quot;free_y&quot;) +
  labs(x = &quot;Contribution to sentiment(before disaster)&quot;,
       y = NULL)+
  xlim(0, 202)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-10-1.png" alt="Emotion before stampede" width="768" />
<p class="caption">
Emotion before stampede
</p>
</div>
<p>Right after disaster happened, the words people used shows more
characters with negative emotions, such as <em>fear</em>,
<em>sadness</em>, and <em>disgust</em>.</p>
<pre class="r"><code>dfduring %&gt;%
  inner_join(nrc) %&gt;%
  group_by(sentiment) %&gt;%
  arrange(desc(freq)) %&gt;%
  slice(1:10) %&gt;%
  ungroup() %&gt;%
  mutate(word = reorder(word, freq)) %&gt;%
  ggplot(aes(freq, word, fill = sentiment)) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~sentiment, scales = &quot;free_y&quot;) +
  labs(x = &quot;Contribution to sentiment(during disaster)&quot;,
       y = NULL)+
  xlim(0, 100)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-11-1.png" alt="Emotion during stampede" width="768" />
<p class="caption">
Emotion during stampede
</p>
</div>
<p>After disaster, the words people used shows more characters with
positive emotion, however, the <em>fear</em> emotion is strong.</p>
<pre class="r"><code>dfafter %&gt;%
  inner_join(nrc) %&gt;%
  group_by(sentiment) %&gt;%
  arrange(desc(freq)) %&gt;%
  slice(1:10) %&gt;% 
  ungroup() %&gt;%
  mutate(word = reorder(word, freq)) %&gt;%
  ggplot(aes(freq, word, fill = sentiment)) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~sentiment, scales = &quot;free_y&quot;) +
  labs(x = &quot;Contribution to sentiment(after disaster)&quot;,
       y = NULL)+
  xlim(0,100)</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-12-1.png" alt="Emotion after stampede" width="768" />
<p class="caption">
Emotion after stampede
</p>
</div>
</div>
<div id="resilience-score" class="section level2">
<h2>Resilience score</h2>
<p>During the disaster, the emotion score dropped significantly. 6 days
after the disaster, emotion score bounced back to the level of before
disaster.</p>
<pre class="r"><code>dfbefore &lt;- dfbefore %&gt;%
  inner_join(afinn) %&gt;%
  mutate(score = freq*value)
dfduring &lt;- dfduring %&gt;%
  inner_join(afinn) %&gt;%
  mutate(score = freq*value)
dfafter &lt;- dfafter %&gt;%
  inner_join(afinn) %&gt;%
  mutate(score = freq*value)
dfafter2 &lt;- dfafter2 %&gt;%
  inner_join(afinn) %&gt;%
  mutate(score = freq*value)
dfafter3 &lt;- dfafter3 %&gt;%
  inner_join(afinn) %&gt;%
  mutate(score = freq*value)
dfafter4 &lt;- dfafter4 %&gt;%
  inner_join(afinn) %&gt;%
  mutate(score = freq*value)
dfafter5 &lt;- inner_join(dfafter5, afinn, by = &quot;word&quot;)%&gt;%
  mutate(score = freq*value)

SCORE  &lt;- c(sum(dfbefore$score), sum(dfduring$score), sum(dfafter$score),sum(dfafter2$score),sum(dfafter3$score),
            sum(dfafter4$score), sum(dfafter5$score))
timeframe &lt;- c(&quot;-1&quot;, &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;)
names &lt;- c(&quot;before&quot;, &quot;during&quot;, &quot;3D-after&quot;, &quot;6D-after&quot;, &quot;9D-after&quot;, &quot;12D-after&quot;, &quot;15D-after&quot;)
trend &lt;- data.frame(names, timeframe, SCORE)

ggplot(trend, aes(x= factor(names,level = c(&quot;before&quot;, &quot;during&quot;, &quot;3D-after&quot;, &quot;6D-after&quot;, &quot;9D-after&quot;, &quot;12D-after&quot;, &quot;15D-after&quot;)), SCORE, group = 1))+
  geom_line(arrow = arrow())+
  geom_point()+
  xlab(&quot;timeline&quot;)+
  ylab(&quot;emotion score&quot;)+
  ggtitle(&quot;social resilience&quot;)+
  theme(plot.title = element_text(hjust = 0.5))</code></pre>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-13-1.png" alt="Social resilience" width="576" />
<p class="caption">
Social resilience
</p>
</div>
</div>
</div>
<div id="conclusions" class="section level1">
<h1>Conclusions</h1>
<p>This project illustrates the social resilience after stampede
disaster on Oct. 29th. The topic trends on Twitter changed rapidly,
meaning that people’s focus changed much faster than we expected. In
addition, by combining sentiment dictionaries with Twitter data, we can
observe the public emotion. Before stampede, public emotion was strongly
positive, words with joy emotion were frequently used. In the first
three days after disaster, people focused on the stampede incident, and
words with negative emotions, such as fear, sadness, and disgust are
more widely used. After disaster, the positive words are more frequently
used than during disaster. Emotion score shows public emotion changes
and social resilience. Before stampede, the emotion score was nearly
+1000. Between Oct. 29th to Nov. 1st, the emotion score dropped
significantly, with the score of -1250. After disaster, the emotion
score slowly increased and showed a steady positive trend 6 days after
disaster. The results show the social emotion score bounce back after 6
days after stampede although the disaster traumatize the society.</p>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<ul>
<li><a
href="https://www.rdocumentation.org/packages/maps/versions/3.4.0/topics/world.cities"
class="uri">https://www.rdocumentation.org/packages/maps/versions/3.4.0/topics/world.cities</a></li>
<li><a
href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know"
class="uri">http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know</a></li>
<li><a href="https://posit.co/blog/the-r-markdown-cheat-sheet/"
class="uri">https://posit.co/blog/the-r-markdown-cheat-sheet/</a></li>
</ul>
</div>

<!-- give the footer some space -->
<br/>
<br/>

<footer id="site-footer">
  <div id="footer1">
  This website is a project for Adam Wilson's <a href="https://wilsonlab.io/GEO511"><i> Spatial Data Science (GEO511) </i></a>Course at the University at Buffalo
  </div>
  <div id="footer2">
  <a rel="license" property="http://creativecommons.org/ns#license"
  href="http://creativecommons.org/licenses/by/4.0/" ><img src="img/cc-by.svg" alt="cc-by"/></a> 
  </div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>


</body>
</html>
